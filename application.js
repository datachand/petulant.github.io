!function(a,e){function t(a){var e=!0;return e&&localStorage.setItem("local-data",JSON.stringify(a)),e}function n(a){localStorage.setItem("local-data",JSON.stringify(a))}function o(){var a=JSON.parse(localStorage.getItem("local-data")),e=Object.keys(a.data);$.each(e,function(e,t){$("#"+t).val(a.data[t])})}function l(){var a=e().post({message:"Do you like to sync?",hideAfter:1e4,actions:{info:{label:"Sync Now",action:function(){console.log("Syncing Local Data");var a=JSON.parse(localStorage.getItem("local-data"));a.sync=!1,t(a),e().hideAll()}},cancel:{action:function(){return a.cancel()}}}})}var c=null;$(document).ready(function(){if($(".sync-button").hide(),e.options={extraClasses:"messenger-fixed messenger-on-bottom messenger-on-right",theme:"flat"},window.applicationCache&&(window.applicationCache.addEventListener("updateready",function(){window.applicationCache.status===window.applicationCache.UPDATEREADY?(window.applicationCache.swapCache(),confirm("A new version of this App is available. Load it now?")&&window.location.reload()):console.info("Manifest up-to-date")},!1),window.applicationCache.addEventListener("noupdate",function(){console.log("App is up-to-date")},!1)),c=a.state,$(".offline-status").html("up"===c?"<span class='label label-success'>Online</span>":"<span class='label label-danger'>Offline</span>"),null===localStorage.getItem("local-data")){var t={sync:!1,data:{input1:null,input2:null,input3:null,input4:null,input5:null,input6:null,input7:null}};localStorage.setItem("local-data",JSON.stringify(t))}else{var n=JSON.parse(localStorage.getItem("local-data"));n.sync?l():$(".sync-button").hide()}if(null===localStorage.getItem("offline-status")){var s=a.state;localStorage.setItem("offline-status",s)}else{var s=localStorage.getItem("offline-status");"up"===s?$("#offline-simulate-check").attr("checked","checked"):$("#offline-simulate-check").removeAttr("checked")}console.log(a.state),o()}),$(document).on("click",".fuel-input",function(){var e=$(this).data("value");console.log(e);var o=JSON.parse(localStorage.getItem("local-data"));console.log(o.data),o.data[e]=$("#"+e).val(),"up"===a.state?(o.sync=!1,console.log("Up => "+e),t(o)):(o.sync=!0,console.log("Down => "+e),n(o))}),a.on("confirmed-down",function(){console.info("Confirmed Down"),c=a.state,$(".offline-status").html("<span class='label label-danger'>Offline</span>")}),a.on("confirmed-up",function(){console.info("Confirmed Up"),c=a.state,$(".offline-status").html("<span class='label label-success'>Online</span>");var e=JSON.parse(localStorage.getItem("local-data"));e.sync&&(l(),console.log("Do you like to sync?"))}),$(document).on("click",".sync-button",function(){console.log("Syncing Local Data");var a=JSON.parse(localStorage.getItem("local-data"));a.sync=!1,t(a)}),$(document).on("click","#offline-simulate-check",function(){var e=a.state;localStorage.setItem("offline-status",e)})}(window.Offline,window.Messenger);
//# sourceMappingURL=application.js.map
